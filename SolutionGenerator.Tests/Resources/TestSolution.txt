solution MySolution
{
    configuration everything
    [
        Debug: debug,test
        Release: release
    ]

    configuration no-tests
    [
        Debug: debug
        Release: release
    ]

    set target platforms
    [
        Any CPU
    ]

    settings template.defaults
    {
        set root namespace: $(SOLUTION_NAME).$(PROJECT_NAME)
        set module source path: Resources/$(MODULE_NAME)
        set include files: glob ".{cs,txt,json,xml,md}"
        set exclude files: none
        set lib refs: none
        set project refs: none
        set define constants: none
        set target framework: v4.6
        set language version: 6
        set debug symbols: true
        set debug type: full
        set optimize: false
        set error report: prompt
        set warning level: 4
        set platform target: AnyCPU
    }
}

module MyModule : MyTemplate
{
    settings project
    {
        set guid: 8CA3145D-B47F-4355-808A-2C08F48EB061
    }

    settings project.tests : project
    {
        set guid: 3B8C3242-A267-4E63-9AE2-7099ACB9F730
    }
}

module MyOtherModule : MyTemplate
{
    settings project
    {
        set guid: 80F607D5-82CA-40E2-98F1-CE8B7B38AA22

        add project refs
        [
            MyModule
        ]
    }

    settings project.tests : project
    {
        set guid: 4053B07E-0E18-4F56-9A9D-30CAE83364B5

        add project refs
        [
            MyModule.Tests
        ]
    }
}

template MyTemplate
{
    project "$(MODULE_NAME) : project"
    project "$(MODULE_NAME).Tests : project.tests"

    settings project
    {
        set include files: glob "Resources/$(MODULE_NAME)/**/*.{cs,txt,json,xml,md}"
        set exclude files
        [
            glob "**/Tests/**"
            glob "**/obj/**"
        ]

        set debug symbols (debug): true
        set debug type (debug): full
        set optimize (debug): false

        set debug symbols (release): false
        set debug type (release): pdbonly
        set optimize (release): true

        add lib refs
        [
            Lib1.dll
            Lib2.dll
        ]

        add define constants
        [
            DEFINE_A
            DEFINE_B
        ]

        add define constants (debug)
        [
            DEBUG
            TRACE
        ]

        add define constants (test)
        [
            TEST
        ]

        add define constants (release)
        [
            RELEASE
        ]
    }

    settings project.tests : project
    {
        // Clear the inherited files
        set include files: none
        set exclude files: none

        // TODO: implement exclude command if needed
        exclude (no-tests)
        skip (!test)

        set include files: glob "Resources/$(MODULE_NAME)/**/Tests/**/*.{cs,txt,json,xml,md}"

        add project refs
        [
            $(MODULE_NAME)
        ]
    }
}

